/* pages/profile/profile.wxss (最终 Flexbox 稳定修复版) */

/* --- 1. 页面级样式 --- */
page {
  height: 100vh;
  overflow: hidden;
  color: #3a3a3a;
  background-color: #ECE9DD;
  font-family: sans-serif;
}

/* --- 2. 页面总容器 --- */
.page-container {
  height: 100%;
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
  padding-bottom: calc(50px + env(safe-area-inset-bottom));
}

/* --- 3. 顶部固定区 --- */
.top-section {
  flex-shrink: 0;
  padding: 0 48rpx;
  z-index: 10;
  background-color: #ECE9DD;
}
.custom-nav {
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}
.nav-title { 
  font-size: 36rpx; 
  font-weight: 500; 
}

/* --- 面板通用样式 --- */
.panel {
  box-sizing: border-box;
  margin-bottom: 36rpx;
  position: relative; /* 【关键】为内部绝对定位的背景图提供容器 */
  overflow: hidden; /* 防止背景图溢出 */
}

/* 【修复】背景图的通用样式 */
.panel-bg-img {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1; /* 置于底层 */
}

/* 【修复】面板内容的容器，确保在背景图之上 */
.panel-content {
  position: relative;
  z-index: 2;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
}

/* --- 境界与修为面板 --- */
.realm-panel {
  margin-top: 24rpx;
  height: 140rpx;
}
.realm-panel .panel-content {
  display: flex; 
  flex-direction: column; 
  justify-content: center; 
  align-items: center;
  padding: 10rpx 70rpx 10rpx 80rpx;
}
.realm-name { 
  font-size: 36rpx; 
  font-weight: bold; 
  margin-bottom: 12rpx; 
}
.exp-bar-wrapper { 
  width: 100%; 
  display: flex; 
  align-items: center; 
  font-size: 28rpx; 
}
.exp-label { 
  margin-right: 16rpx; 
}
.progress-bar-container {
  flex: 1;
  height: 48rpx;
  padding: 8rpx 12rpx; 
  box-sizing: border-box;
  position: relative; /* 【关键】为内部元素定位提供容器 */
  border-radius: 999px 0 0 999px; 
  overflow: hidden;
}
.progress-bar-portion {
  /* 【核心修改 ①】将高度从 100% 改为一个具体的值，例如 24rpx */
  /* 你可以根据喜好调整这个数值大小 */
  height: 36rpx;

  /* 【核心修改 ②】将 top 从 0 改为 50% */
  top: 50%;
  transform: translateY(-50%);
  left: 0.1; /* 依然从左侧开始 */
  border-radius: 6px 0 0 6px; /* 可以适当减小圆角，比如 2px，使其更匹配新的高度 */
  transition: width 0.3s ease-in-out;
  z-index: 3;
  background: linear-gradient(to right, #252525, #c0c0c0);
  position: absolute;
}

.exp-value-inside {
  position: absolute;
  right: 24rpx;
  top: 50%;
  transform: translateY(-50%);
  z-index: 4; /* 最高层 */
  font-size: 22rpx;
  color: #3a3a3a;
  text-shadow: 0 0 4rpx rgba(0, 0, 0, 0.5); 
}

/* --- 五大属性面板 --- */
.attributes-panel {
  height: 140rpx;
}
.attributes-panel .panel-content {
  display: flex; 
  flex-direction: column; 
  justify-content: center;
  padding: 10rpx 70rpx 10rpx 80rpx;
  font-size: 28rpx;
}
.attr-row { 
  display: flex; 
  width: 100%; 
  margin-bottom: 12rpx;
}
.attr-row:last-child {
  margin-bottom: 0;
}
.attr-item { 
  width: 33.33%; 
  display: flex; 
  flex-shrink: 0; 
}
.attr-label {
  flex-shrink: 0; 
  margin-right: 6rpx;
}
.attr-value {
  flex-grow: 1; 
  font-weight: 500;
}

/* --- 每日语录面板 --- */
.quote-panel {
  width: 97%; 
  margin-left: auto;
  margin-right: auto;
  min-height: 80rpx; 
  display: flex;
  align-items: center;
}
.quote-panel-bg { /* 此处 image 标签的样式本身就是正确的，无需修改 */
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
}
.quote-content-wrapper {
  position: relative;
  z-index: 2;
  width: 100%;
  padding: 16rpx 48rpx;
  box-sizing: border-box;
  display: flex;
  align-items: center;
}
.quote-icon { 
  width: 32rpx; 
  height: 32rpx; 
  flex-shrink: 0;
  margin-right: 24rpx;
}
.quote-text {
  font-size: 28rpx;
}

/* --- 4. 中间滚动区 --- */
.middle-section {
  flex: 1;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  min-height: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}
.avatar-image {
  width: 700rpx;
  height: 700rpx;
}

/* --- 5. 底部固定区 --- */
.bottom-section {
  flex-shrink: 0;
  display: flex;
  justify-content: space-around;
  padding: 24rpx 48rpx;
  z-index: 10;
  background: linear-gradient(to top, #ECE9DD, rgba(236, 233, 221, 0));
}
.action-button {
  width: 280rpx; 
  height: 120rpx;
  display: flex; 
  justify-content: center; 
  align-items: center;
  font-size: 32rpx; 
  font-weight: 500;
  position: relative; /* 【关键】为背景图和文字提供定位容器 */
  overflow: hidden; /* 防止背景图溢出 */
}
/* 【修复】按钮文字样式 */
.btn-text {
  position: relative;
  z-index: 2; /* 确保文字在背景图之上 */
}